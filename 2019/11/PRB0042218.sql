-- Atualizar registro de tela para incluir novas rotinas "L" - Liberação e "D" - Cancelamento
UPDATE craptel 
SET CDOPPTEL = cdopptel || ',L,D'
   ,LSOPPTEL = LSOPPTEL || ',LIBERACAO,CANCELAMENTO'
WHERE nmdatela = 'ATENDA' AND UPPER(NMROTINA) = 'TELE ATEN';

-- Criar registros de acesso baseados na opção "A"
INSERT INTO CRAPACE
  (NMDATELA, CDDOPCAO, CDOPERAD, NMROTINA, CDCOOPER, IDAMBACE)
  (SELECT NMDATELA, 'L', CDOPERAD, NMROTINA, CDCOOPER, IDAMBACE
     FROM CRAPACE
    WHERE NMDATELA = 'ATENDA'
      AND UPPER(NMROTINA) = 'TELE ATEN'
      AND CDDOPCAO = 'A'
      AND IDAMBACE = 2);

INSERT INTO CRAPACE
  (NMDATELA, CDDOPCAO, CDOPERAD, NMROTINA, CDCOOPER, IDAMBACE)
  (SELECT NMDATELA, 'D', CDOPERAD, NMROTINA, CDCOOPER, IDAMBACE
     FROM CRAPACE
    WHERE NMDATELA = 'ATENDA'
      AND UPPER(NMROTINA) = 'TELE ATEN'
      AND CDDOPCAO = 'A'
      AND IDAMBACE = 2);
      
-- Efetuar commit
COMMIT;
