<!--
	Alterações:                                  
-->

<html>
<head>

<link href="/cecred/css/estilo2.css" rel="stylesheet" type="text/css">
<link href="/cecred/estilos/progrid.css" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="/cecred/css/base/jquery.ui.all.css">

<script type="text/javascript" src="/cecred/scripts/scripts.js"></script>	
<script type="text/javascript" src="/cecred/scripts/jquery.js"></script>
<script type="text/javascript" src="/cecred/scripts/jquery.ui.core.js"></script>
<script type="text/javascript" src="/cecred/scripts/jquery.ui.datepicker.js"></script>
<script type="text/javascript" src="/cecred/scripts/funcoes.js"></script>
<script src="/cecred/js/funcoes.js"></script>

<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="wsoptions" content="no-output">
<meta name="GENERATOR" content="Microsoft FrontPage 4.0">
<meta http-equiv="Cache-Control" content="No-Cache">
<meta http-equiv="Pragma"        content="No-Cache">
<meta http-equiv="Expires"       content="0">
<title>Confirmação dos Eventos</title>
<link href="/cecred/estilos/progrid.css" rel="stylesheet" type="text/css">
<!--script SRC="/cecred/jsbiblio/sorttable.js"></script-->
</head>
<body style="margin-left: 3px; ">
  <div id="divAguardo"></div>
  <div id="divError"></div>
  <div id="divConfirm"></div>
  <div id="divBloqueio"></div>
  <div id="divF2"></div>
  <div id="divUsoGenerico"></div>
  <iframe src="' + UrlSite + 'blank.php" id="iframeBloqueio"></iframe>
  
<script language="JavaScript">
  function aguarde(){      
    // abre a janela com a mesagem de aguarde    
    showMsgAguardo("Carregando Dados...");
  }  
    
  NomeDoProgramaPrincipal  = '/wpgd0057.w';
  NomeDoProgramaDeListagem = '/wpgd0057ls.w';
  NomeDoProgramaDeAjuda    = '/wpgd0057aj.w';
</script>

<form action="#." method="POST" name="form" width="975">
        
  <input type="hidden" name="aux_dsendurl" value="">
  <input type="hidden" name="aux_idevento" value="">
  <input type="hidden" name="aux_cddopcao" value="">
  <input type="hidden" name="aux_nrdrowid" value="">
  <input type="hidden" name="aux_lspermis" value="">
  <input type="hidden" name="aux_dsretorn" value="">
  <input type="hidden" name="aux_stdopcao" value="">  
  <input type="hidden" name="cdevento" 	   value="">
  <input type="hidden" name="aux_cdcopope" value="">  
  <input type="hidden" name="aux_cdoperad" value="">
  <input type="hidden" name="dtanoage"     value="">
  <input type="hidden" name="aux_lsevesel" value="">
  <input type="hidden" name="aux_lsagesel" value="">
  <input type="hidden" name="aux_lstqesel" value="">
  <input type="hidden" name="aux_lsconsel" value=""> 
  <input type="hidden" name="aux_resposta" value="">    
  <input type="hidden" name="aux_dsurlphp" value="">    
  
  <!-- Inicio do modelo com abas -->
  <div id="Layer1" style="position:absolute; border:0px; width:35px; height:35; z-index:1; left: 25px; top: 2px; visibility: ;"><img src="/cecred/images/icones/ico_fornecedor.gif" width="28" height="32" align="bottom">        </div>
    <table width="975" height="460"  border="0" cellpadding="0" cellspacing="0" background="/cecred/images/geral/guia_fundo.gif">
      <tr>
        <td height="20" colspan="5">
          <table width="100%"  border="0" cellspacing="0" cellpadding="0">
            <tr>
              <td width="5%"><img src="/cecred/images/geral/guia_esquerda.gif" width="11" height="21"></td>
              <td width="5%"><img src="/cecred/images/geral/spacer.gif" width="48" height="10"></td>
              <td width="43%" height="20" class="linkGuia"><div align="left">Confirma&ccedil;&atilde;o dos Eventos - AGO/AGE</div> </td>
              <td width="43%" class="linkGuia"><div align="right">wpgd0057</div></td>
              <td width="4%" align="right" valign="middle" class="linkGuia"><img src="/cecred/images/geral/guia_direita.gif" width="11" height="21"></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr valign="top" bgcolor="#FFFFFF">
        <td colspan="5">
          <table width="100%" height="100%"  border="0" align="left" cellpadding="0" cellspacing="1" bgcolor="#999999">
            <tr>
              <td height="200" valign="top" bgcolor="#FFFFFF">
                <table width="100%" height="30%"  border="0" cellpadding="0" cellspacing="0">
                  <tr>
                    <td height="20"  align="left" valign="top">
                      <!-- Interrupcao do modelo - início das abas -->
                      <table width="100%"  border="0" align="center" cellspacing="1" >
                        <tr>
                          <td colspan="7">&nbsp;</td>
                        </tr>
                        <tr>
                          <td width="10%" align="right" class="NomeCampo"> Agenda: </td>
                          <td width="10%" class="NomeCampo">
                            <input id="aux_dtanoage" name="aux_dtanoage" class="Campo" type="text" size="4" onChange="aguarde();RecarregaConsulta();">
                          </td>
                          <td width="10%" align="right" class="NomeCampo"> Cooperativa: </td>
                          <td width="20%" class="NomeCampo">
                            <select name="aux_cdcooper" class="Campo" id="cdcooper" onChange="aguarde();document.form.aux_dtanoage.value = ''; document.form.aux_cddopcao.value=''; document.form.submit();">
                            </select>
                          </td>
                          <td width="20%" class="NomeCampo">
                            <div align="right"><a href="#." onclick="adEvento();">Adicionar Eventos</a>&nbsp;</div>
                          </td>
                        </tr>
                        <tr>
                          <td colspan="7">&nbsp;</td>
                        </tr>
                       </table>
                    </td>
                  </tr>
                  <tr>
                    <td height="8" align="left" >
                      <div id="divVerba" name="divVerba" align="left" width="100%">
                        <table id="tbevento" name="tbevento" width="100%" border="0" cellpadding="0" cellspacing="0" class="dataTable">
                          <thead>
                            <tr>
                              <th id="tbevento_col1" width="10%" height="25" align="center" background="/cecred/images/menu/fnd_title.jpg" class="txtMenuTitulos">PA</th>
                              <th id="separador1" width="1%" height="25" align="center" background="/cecred/images/menu/fnd_title.jpg" class="txtMenuTitulos">
                                <img src="/cecred/images/geral/div.gif" width="2" height="15">
                              </th>
                              <th id="tbevento_col2" width="10%" height="25" align="center" background="/cecred/images/menu/fnd_title.jpg" class="txtMenuTitulos">Qtde Eventos</th>
                              <th width="1%" height="25" align="center" background="/cecred/images/menu/fnd_title.jpg" class="txtMenuTitulos">
                                <img src="/cecred/images/geral/div.gif" width="2" height="15">
                              </th>
                              <th id="tbevento_col3" width="65%" height="25" align="center" background="/cecred/images/menu/fnd_title.jpg" class="txtMenuTitulos">Evento</th>
                              <th width="1%" height="25" align="center" background="/cecred/images/menu/fnd_title.jpg" class="txtMenuTitulos">
                                <img src="/cecred/images/geral/div.gif" width="2" height="15">
                              </th>
                              <th id="tbevento_col4" width="12%" height="25" align="center" background="/cecred/images/menu/fnd_title.jpg" class="txtMenuTitulos">
                                Confirmado&nbsp;&nbsp;
                                <input id="cbSelecTodos" type="checkbox" name="cbSelecTodos" onclick="SelecionaTodos();">
                              </th>
                            </tr>
                          </thead>
                        </table>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td height="10"  align="left" valign="bottom">
                      <table width="175" align="center">
                        <tr>
                          <td align="center"><img src="/cecred/images/botoes/btn_liberar_para_agenda.gif" style="cursor:hand" onClick="Salvar()" name="btn_libera"></td>
                        </tr>
                      </table>
                    </td>
                  </tr>
                </table>
              </td>
            </tr>
          </table>
        </td>
      </tr>
    </table>
  </form>

  <script language="JavaScript">
    NomeDoProgramaPrincipal = document.form.aux_dsendurl.value + NomeDoProgramaPrincipal;
    document.form.action = NomeDoProgramaPrincipal;

    var itemselec = false;
    var UrlSite     = parent.window.location.href.substr(0,parent.window.location.href.lastIndexOf("/") + 1); // Url do site
    var UrlImagens	= UrlSite + "imagens/"; // Url para imagens

    function mostraEventos(){
    
      var row;
      var cell;
      var liberar = true;
      var cor = '#F7F7F7';
      var status = false;
      var aux_disabled = "";
            
      // Apaga todas as linhas, menos a do cabeçalho
      for (var i = document.all.tbevento.rows.length; i>1; i--){
        document.all.tbevento.deleteRow(i-1);
      }
      
      for(i=0; i < mevento.length; i++){
      
        row = tbevento.insertRow();
        
        if (cor == '#FFFFFF'){
          cor = '#F7F7F7';
        }else{
          cor = '#FFFFFF';
        }
           
        row.bgColor = cor;
        
        //PA
        cell = row.insertCell();
        cell.className = 'txtPequeno';
        cell.height = 26;
        cell.align = 'center';
        cell.width = document.all.tbevento_col1.width;
        cell.innerHTML = "&nbsp;&nbsp;TODOS" + 
                         '<in' + 'put type="hidden" value="' + mevento[i].cdevento + '" id="aux_cdevento'+i+'" name="aux_cdevento">' +
                         '<in' + 'put type="hidden" value="0" id="aux_agencsel'+i+'" name="aux_agencsel">' +
                         '<in' + 'put type="hidden" value="' + (mevento[i].ctevento == 2 ? 'integracao' : (mevento[i].flgevobr ? 'obrigatorio' : 'evento')) + '" name="aux_tpevento" id="aux_tpevento'+i+'">';
        
        //Separador
        cell = row.insertCell();   // Separador
        cell.className = 'txtNormal';
        cell.width = document.all.separador1.width;
        cell.height = 26;
        cell.align = 'left';
        cell.innerText = '';
          
        //Qtde Eventos
        cell = row.insertCell();
        cell.className = 'txtPequeno';
        cell.height = 26;
        cell.align = 'center';
        cell.width = document.all.tbevento_col2.width;
        cell.innerHTML = '<in' + 'put type="text" size="2"  style="margin-right:5px" class="Campo qtocoeve" maxlength="5" id="aux_qtocoeve'+ i +'" name="aux_qtocoeve'+ i +'" value="' + ConverteDec(mevento[i].qtocoeve, "1") + '" onkeypress="if(event.keyCode == 13){cadastraQtdEventos(' + ConverteDec(mevento[i].qtocoeve, "1") + ','+mevento[i].cdevento+','+ i +','+mevento[i].ctevento +',\''+ mevento[i].flgtdpac+'\');}" onkeyup="AtualizaSaldo();atribuiQtdEventos(this.value, '+ i +')" ' + (mevento[i].ctevento == '2' && mevento[i].idstagen == 2 ?  '' : mevento[i].flgevobr ) + '>' +
                         '<in' + 'put type="hidden" size="3"  maxlength="5" id="hdnqtocoeve' + i +'" name="hdnqtocoeve' + i +'" value="' + ConverteDec(mevento[i].qtocoeve, "1") + '"><img src="/cecred/images/btn_calendario.gif" style="cursor:hand;margin-right:5px" width="15" height="15" onclick="cadastraQtdEventos(' + ConverteDec(mevento[i].qtocoeve, "1") + ','+mevento[i].cdevento+','+ i +','+mevento[i].ctevento +',\''+ mevento[i].flgtdpac+'\')">';
        
        //Separador
        cell = row.insertCell();   // Separador
        cell.className = 'txtNormal';
        cell.width = document.all.separador1.width;
        cell.height = 26;
        cell.align = 'left';
        cell.innerText = '';
        
        //Eventos
        cell = row.insertCell();
        cell.className = 'txtPequeno';
        cell.height = 26;
        cell.align = 'left';
        cell.width = document.all.tbevento_col3.width;
        cell.innerHTML = mevento[i].nmevento;
        
        //Separador
        cell = row.insertCell();   // Separador
        cell.className = 'txtNormal';
        cell.width = document.all.separador1.width;
        cell.height = 26;
        cell.align = 'left';
        cell.innerText = '';
        
        //Confirmado
        cell = row.insertCell();
        cell.className = 'txtPequeno';
        cell.height = 26;
        cell.align = 'center';
        cell.width = document.all.tbevento_col4.width;
        cell.innerHTML = '<in' + 'put type="checkbox" id="aux_flgselec' + i + '" name="aux_flgselec"  class="' + (mevento[i].ctevento != '2' ? 'evento' : 'integracao') + '" ' + mevento[i].flgevsel + ' ' + mevento[i].flgevobr + '>';
        
        if(mevento[i].idstagen > 1){
          status = true;
        }
                
        // se ja foram enviados os eventos, desabilita o botão de envio
        if (mevento[i].idstagen < 3){
          liberar = false;
        }
      }
      
      hideMsgAguardo();
      
      // se ja foram enviados os eventos, desabilita o botão de envio
      if (liberar){
        document.form.btn_libera.style.filter='progid:DXImageTransform.Microsoft.BasicImage(opacity=0.2)';
        document.form.btn_libera.style.cursor='default';
        document.form.btn_libera.disabled=true;
      }else{
        document.form.btn_libera.style.filter='';
        document.form.btn_libera.style.cursor='hand';
        document.form.btn_libera.disabled=false;
      }
      
      // Não mostrar validação para PAC, cuja seleção foi encerrada sem evento (integração) selecionado
      for(i=0;i<mevento.length;i++){
        if (mevento[i].idstagen > 1){
          status = true;
        }
      }

      window.close();
    }

  function CarregaPrincipal () {
     //top.topFrame.document.all.titulo.innerHTML = 'Distribuição de Verbas - ' + document.form.aux_idevento.value;
     //jan3 = open('wpgd0057a.htm','fraux');
     jan3 = open('wpgd0057b.htm','fraux');
     window.status = "";
  }

  function LimparCampos() {}
  function Habilita() {}
  function HabilitaSalvar() {}

  function ValidaDados(form){ 
         var msg="";
           
                
          if (msg == "")
              return true
          else
          {
             top.frcod.MostraResultado('1',msg);
             return false
          }
      }

  function Recarrega(){
    document.form.submit();
  }

  function RecarregaConsulta(){
    if (document.form.aux_dtanoage.value != '' ) {          
      document.form.submit();
    }
  }

  // Guardar os valores da tabela para que sejam salvos no banco de dados
  function ArmazenaValores(){
    document.form.aux_lsevesel.value = '';
    document.form.aux_lsconsel.value = '';
    document.form.aux_lsagesel.value = '';
    document.form.aux_lstqesel.value = '';

     if ((document.all.tbevento.rows.length == 0) && (itemselec == false)){
       return false;    
     }
     
     // Se tem mais de um PAC
     if(document.all.tbevento.rows.length > 1){
        for(i=0;i<document.form.aux_cdevento.length;i++) {
          // Grava os valores em forma de lista, separados por ";", para que seja lido pelo progress
          if (document.form.aux_lsevesel.value == ''){
             document.form.aux_lsevesel.value = document.form.aux_cdevento[i].value;
             document.form.aux_lsconsel.value = ($("#aux_flgselec"+i).prop("checked") ? '1' : '0');
             document.form.aux_lsagesel.value = document.form.aux_agencsel[i].value;
             document.form.aux_lstqesel.value = document.getElementById("aux_qtocoeve"+i).value;
          }else{
             document.form.aux_lsevesel.value = document.form.aux_lsevesel.value + ';'
                                              + document.form.aux_cdevento[i].value;
             document.form.aux_lsconsel.value = document.form.aux_lsconsel.value + ";"
                                              + ($("#aux_flgselec"+i).prop("checked") ? '1' : '0');
             document.form.aux_lsagesel.value = document.form.aux_lsagesel.value + ';'
                                              + document.form.aux_agencsel[i].value;
            document.form.aux_lstqesel.value = document.form.aux_lstqesel.value + ";" + document.getElementById("aux_qtocoeve"+i).value;
          }
        }
      }else{            
         if (itemselec == false && !document.form.aux_flgselec.disabled) {
            document.form.aux_lsevesel.value = document.form.aux_cdevento.value;
            document.form.aux_lsconsel.value = $("#aux_flgselec"+i).prop("checked") ? '1' : '0';
            document.form.aux_lsagesel.value = document.form.aux_agencsel.value;
            document.form.aux_lstqesel.value = document.getElementById("aux_qtocoeve0").value;
         }
      }
     return true;
  }

  function Salvar(){   
     /* Permitir "Liberar para a Agenda" o PA, cuja seleção foi encerrada sem evento (integração) selecionado */
     for(i=0;i<mevento.length;i++){
         itemselec = true;
     }
         
     //ZeraModoExclusao();
     if ((document.all.tbevento.rows.length < 1) && (itemselec == false)) {
        return false;
     }
     
     document.form.aux_stdopcao.value = 'al';
     var vaux = document.form.aux_lspermis.value;      
     
     if ((vaux.substring(1,2) == 'A') || (document.form.aux_stdopcao.value == 'i')) {              
          if ( document.form.aux_cddopcao.value!='sa')  {                    
             /*if (ValidaDados(document.forms[0])) {*/                    
                 //Habilita(); 
                 //HabilitaSalvar(); 
                 if (!ArmazenaValores())
                     return false;
                 if ((document.all.tbevento.rows.length >= 1) && itemselec) {
                    
                    document.form.aux_cddopcao.value='sa';
                    aguarde();
                    status = 'Salvando. Por favor, aguarde ...';
                    document.form.submit();
                    return true;         
                 }
          } 
     }else{ 
        alert('Desculpe, mas você não tem permissão para executar esta função.'); 
        return false;
     }
  }

  // Converte um valor com decimal separado por "," para separado por "."
  function ConverteDec(str, tipo){
     if(tipo == "1"){
        str = str.replace(".","");
        str = str.replace(",",".");
        return str;
     }else{
        str = str.replace(",","");
        str = str.replace(".",",");
        return str;
     }
  }

  function AtualizaSaldo(){

     var aux_saldo = 0; 
           
     if(document.form.aux_flgselec.length > 1){
       for(i=0;i<document.all.tbevento.rows.length-1; i++){
         //desabilita selecao caso a quantidade de eventos seja '0'
         if(document.getElementById("aux_qtocoeve"+i).value < 1){
           document.form.aux_flgselec[i].checked = false;
           document.form.aux_flgselec[i].disabled = true;
         }else{
           document.form.aux_flgselec[i].disabled = (document.form.aux_tpevento[i].value != 'evento' ? true : false);
           document.form.aux_flgselec[i].checked = (document.form.aux_tpevento[i].value != 'evento' ? true : document.form.aux_flgselec[i].checked);
         }
         
       }
     }else{
       //desabilita selecao caso a quantidade de eventos seja '0'
       if(document.getElementById("aux_qtocoeve0").value < 1){
         document.form.aux_flgselec.checked = false;
         document.form.aux_flgselec.disabled = true;
       }else{
         document.form.aux_flgselec.disabled = (document.form.aux_tpevento.value != 'evento' ? true : false);
         document.form.aux_flgselec.checked = (document.form.aux_tpevento.value != 'evento' ? true : document.form.aux_flgselec.checked);
       }
     }
  }

  function adEvento(){

     if(meventoAd.length <= 0){
        alert('Esta Cooperativa não concluiu a Seleção dos Eventos! Impossível adicionar eventos!'); 
        return false;
     }

     // Verifica se o usuário tem permissão de inclusão
     if (document.form.aux_lspermis.value.substring(0,1) != 'I'){ 
        alert('Desculpe, mas você não tem permissão para executar esta função.'); 
        return false;
     }
     
     VarURL = document.form.aux_dsendurl.value + '/wpgd0057a.htm?aux_cdcooper=' + document.form.aux_cdcooper.value
                                               + '&aux_idevento=' + document.form.aux_idevento.value
                                               + '&aux_dtanoage=' + document.form.aux_dtanoage.value;
                  
     window.open(VarURL,'','toolbar=no,location=no,diretories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=500,height=350,top=10,left=10');
     
  }

  // Traz as informações atualizadas do banco de dados
  function Recarrega(){
     document.form.aux_cddopcao.value = "";
     document.form.submit();
  }

  //formatação dos campos
  function formatCurrency(num){
     num = num.toString().replace(/\$|\,/g,'');
     if(isNaN(num))
        num = "0";
     sign = (num == (num = Math.abs(num)));
     num = Math.floor(num*100+0.50000000001);
     cents = num%100;
     num = Math.floor(num/100).toString();
     if(cents<10)
        cents = "0" + cents;
     for (var i = 0; i < Math.floor((num.length-(1+i))/3); i++)
        num = num.substring(0,num.length-(4*i+3))+'.'+
     num.substring(num.length-(4*i+3));
     return (((sign)?'':'-') + num + ',' + cents);
  }

  function SelecionaTodos () {
      if (document.form.cbSelecTodos.checked) {
          for (i = 0; i < document.getElementsByName('aux_flgselec').length; i++)
              if (!document.getElementsByName('aux_flgselec')[i].disabled)
                  document.getElementsByName('aux_flgselec')[i].checked = true;
      }
      else {
          for (i = 0; i < document.getElementsByName('aux_flgselec').length; i++)
              if (!document.getElementsByName('aux_flgselec')[i].disabled)
                  document.getElementsByName('aux_flgselec')[i].checked = false;
      }
  }

  // valida os parâmetros da agenda
  if(document.form.aux_dtanoage.value == ''){
     alert('Parâmetro da Agenda Não Encontrado!!!');
     document.form.aux_dtanoage.value = '';
     document.form.aux_cdcooper.value = '';     
  }
  


  function atribuiQtdEventos(quantidade,i){ 
    document.getElementById("hdnqtocoeve"+i).value = quantidade;
  } 

  function cadastraQtdEventos(quantidade, cdevento,i,tpevento,flgtdpac){ 
    var arrCaminho = document.form.aux_dsurlphp.value.split('-');
    
    if (quantidade != document.getElementById("aux_qtocoeve"+i).value){ 
				quantidade =  document.getElementById("aux_qtocoeve"+i).value;
		}
      
		/* Para os eventos que estao definidos para todos os pas
			 nao pode permitir informar zero
		*/
		if ( flgtdpac =='S' && quantidade <= 0){
			alert("Para este evento a quantidade de eventos deve ser maior que zero."); 
			return false;      
		}
     
		quantidade = $("#aux_qtocoeve" + i).val();
          	
		if(quantidade > 1){
			alert("Infome no máximo a quantidade de 1(um) evento.");
			$("#aux_qtocoeve" + i).val(0);
			return false;
		}else{
			$("#aux_qtocoeve" + i).val(quantidade);
		}
			
    if (quantidade > 0){ 
    
      VarURL = arrCaminho[0] +'/telas/wpgd0057/cadastra_qtdeventos.php?cdcooper='+document.form.aux_cdcopope.value +'&aux_cdcooper='+ document.form.aux_cdcooper.value+'&cdoperad='+ document.form.aux_cdoperad.value+'&idevento='+document.form.aux_idevento.value+'&cdevento='+cdevento+'&dtanoage='+document.form.aux_dtanoage.value +'&nmdatela=wpgd0057&tldatela=Sugestão de Datas&idcokses='+arrCaminho[1]+'&cdagenci=0&qtdeventos='+quantidade+'&tpevento='+tpevento+'&flgcusfe='+mevento[i].flgcusfe;
      window.open(VarURL,'','toolbar=no,location=no,diretories=no,status=yes,menubar=no,scrollbars=yes,resizable=yes,width=815,height=530,top=10,left=10'); 
        
    }else{
      var exclui = confirm('Informações de datas já gravadas será excluída!');
      if (exclui == true) { 
         document.form.aux_cddopcao.value = 'exe'; 
         document.form.cdevento.value = cdevento;
         status = 'Excluindo. Por favor, aguarde ...'; 
         document.form.submit(); 
         document.getElementById("aux_qtocoeve"+i).value = quantidade;
         return true;
      }
    }
  }

    //Valida botão Salvar
    function ValidaSalvar(){    
      var itemselec = false;
      var arreixos = new Array();
      var valida = true	
            
      for(i=0;i<document.form.aux_flgselec.length;i++) {            
        if (document.form.aux_flgselec[i].checked == true) {                
          cdeixtem = document.form.cdeixtem[i].value ;
          if (arreixos[cdeixtem] == undefined){
            arreixos[cdeixtem] = parseInt(document.form.qttoteve[i].value,10);
          }else{
            arreixos[cdeixtem] = parseInt(arreixos[cdeixtem],10) +  parseInt(document.form.qttoteve[i].value,10);
          }
            
          itemselec = true;                                                                                      
          
        }                                      
      }     
      for(i=0;i<meixos.length;i++){ 
        if (arreixos[meixos[i].cdeixtem] < meixos[i].qtmineve){
          alert("A quantidade de eventos selecionados por eixo é menor que a quantidade mínima de eventos cadastrada por eixo para " + meixos[i].dseixtem + ".");
          return false;
          break;	
        }
        
       }

                 
      if (itemselec == false) {
        alert("Nenhum evento selecionado para ser salvo.");
      }
      return true;
    }

    mostraEventos();
  </script>
</body>