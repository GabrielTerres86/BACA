<!-----------------------------------------------------------------------------------------------
   Programa: siscaixa/web/crap054.w
   Sistema : Caixa On-line
   Sigla   : CRED   
   Autor   : Mirtes.
   Data    : Marco/2001                      Ultima atualizacao: 16/01/2018

  Alteracoes: 	03/07/2009 - Aumento do campo Operador (Diego).
  
				21/08/2009 - Aumento do campo Código(operador) (Diego). 	
			  
				13/12/2011 - Saque com cartao magnetico (Gabriel).
              
				19/08/2013 - Alterações p/ visualização de informações no PINPAD (Jean Michel).
                
                25/09/2013 - Alterações p/ rotina de saque com recibo (Jean Michel).
                
                25/09/2013 - Alterações p/ campo valor, inclusão de formatação (Jean Michel).
                
                08/11/2013 - Nova forma de chamar as agências, de PAC agora 
                             a escrita será PA (Guilherme Gielow).

				23/02/2016 - Tratamentos para utilizaçao do Cartao CECRED e 
                             PinPad Novo (Lucas Lunelli - [PROJ290])

                05/09/2016 - Melhoria para usar copiar e colar o numero de conta
			                 nas rotinas do caixa online SD 474875 (Tiago/Elton).               
    
                12/09/2016 - Adicionado chamada da função "callBlass(event)" - (Evandro - RKAM).                 
                03/11/2016 - Ajustes para TAB e ESC funcionarem de acrodo com o padrão
                             de navegação e ajustado a chamada do callBlass para callBLass 
                             pq nao funcionava (Tiago/Elton SD535217).
							 
				16/01/2018 - Aumentado tamanho do campo de senha para 30 caracteres. (PRJ339 - Reinert)			   							 
----------------------------------------------------------------------------------------------->

<html>
<head>
<meta http-equiv="Content-Language" content="pt-br">
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<meta http-equiv="cache-control" content="no-cache">
<meta http-equiv="Pragma"        content="No-Cache">
<meta http-equiv="Expires"       content="0">
<OBJECT  classid="clsid:7F8735B1-EC41-4134-9083-E059B3F56262" codebase=".\edimpbmp20ci.ocx#version=2,1,3,1" width=0 height=0 align=CENTER hspace=0 vspace=0 id=bematech></OBJECT>
<script language=JavaScript src="/script/formatadadosie.js"></script>
<script language=JavaScript src="/script/funcoes.js"></script>
<script language=JavaScript src="/script/jquery.js"></script>
<script language=JavaScript src="/script/mascara.js"></script>
<script language=JavaScript src="/script/formataconta.js"></script>
<link rel=StyleSheet type="text/css" href="/script/viacredi.css">

<script language="JavaScript">

var cnxPinpad; 		/* COMUNICAÇÃO PINPAD NOVO */
var WrkPinpad = ""; /* KEY DE COMUNICAÇÃO PINPAD NOVO */
var EncPinpad = ""; /* CRYTO PASSWORD */

/**
    *@desc:  Função p/ formatação de valor
    *@param: objField - 
    *@param: flgBlur - 
    *@param: e - 
    *@autor: Jean Michel - 25/09/2013
*/

function formataDecimal(objField,flgBlur,e) {
    
	if (flgBlur) { // Utilizar no evento onBlur
		if (objField.value != "") { // Se campo possui algum conteúdo
			
			var flgVirgula  = false;
			var contDecimos = 0;
			var value       = "";
			var temp        = "";
			var comeco		= false;
			
			for (var i = 0; i < objField.value.length; i++) {
				temp = objField.value.substr(i,1);
				
				if(temp != "0"){
					comeco = true;
				}
				
				if(comeco) 
					value += temp;
				else
					continue;
				
				if (flgVirgula) {
					contDecimos++;
				}
				
				if (!flgVirgula && temp == ",") {
					if(value == ",")
						value = "0" + value;
					flgVirgula = true;
				}
				
				if (contDecimos == 2) {
					break;
				}							
			}
			
			value += !flgVirgula ? ",00" : contDecimos == 0 ? "00" : contDecimos == 1 ? "0" : "";
			
			if (value.length > objField.maxLengt) {
				objField.maxLengt = value.length;
			}
			
			objField.value = value;
			
		}
	} else {
		if (retornaTecla(e) == 44) {
			if (objField.value == "" || objField.value.indexOf(",") != "-1") {
				return false;
			}			
			
			return true;			
		}
		
		// Permitir a utilização das teclas de setas, tab, home e end.
		if ((retornaTecla(e) >= 35 && retornaTecla(e) <= 40) || (retornaTecla(e) == 9) ){
			return true;	
		}
		
		if (!validaNumero(e)) {
			return false;
		}
		
		return true;
	}
}


/**
    *@desc:  Função p/ replace de toda string
    *@param: strTexto - String a ser verificada
    *@param: strAntiga - Caracter a ser removido
    *@param: strNova - Novo caracter no lugar do antigo(strAntiga)
    *@autor: Jean Michel - 04/06/2013
*/
function replaceAll(strTexto, strAntiga, strNova) {

	while (strTexto.indexOf(strAntiga) != -1) {
 		strTexto = strTexto.replace(strAntiga, strNova);
	}
	return strTexto;
	
}

/**
    *@desc:  Função p/ cooperado confirmar saque
    *@param: N/A
    *@autor: Jean Michel - 05/07/2013
*/
function coopConfSaque(){
    var opcao = (document.getElementById('v_opcao1').checked ) ? "R" : "C";
    if(opcao == "C"){
        document.getElementById('divConfirmaSaque').style.display = "none";
        bematech.PinpadLimpaTela(100);
		solicitaSenhaPinpadNovo('');
        document.getElementById('v_senhaCartao').focus();
    }
}


/**
    *@desc:  Função p/ confirmação de valor de saque
    *@param: N/A 
    *@autor: Jean Michel - 09/06/2013
*/
function confirmaSaque(){
    var opcao = (document.getElementById('v_opcao1').checked ) ? "R" : "C";
    var dblValorSaque = document.getElementById('v_valor').value;
    var strValorSaque = "";
    var strEspacoSaque = "";
    
    if (opcao == "C") {
        bematech.PinpadLimpaTela(0);
    	bematech.PinpadPosicionaEscreveDisplay(1,1,"Valor do Saque",300);
        
        strValorSaque = dblValorSaque;
        intQtdCaractSaque = strValorSaque.length;
        strSaqueFinal = strValorSaque;
    
        //Alinhamento de texto Direita -> Esquerda Pinpad
        while(intQtdCaractSaque < 16){
            strEspacoSaque = strEspacoSaque + " ";
            strSaqueFinal = strEspacoSaque + dblValorSaque;
            intQtdCaractSaque = strSaqueFinal.length;
         }
    
    	bematech.PinpadPosicionaEscreveDisplay(2,1,strSaqueFinal,600);
    	
    	document.getElementById('divConfirmaSaque').style.display = "block";
    	document.getElementById('btnConfirmaSaque').focus();
    }
    
	
}

/**
    *@desc:  Função p/ Inicialização da Tela (Contém a maior parte dos procesos de visualização de informações no display do PINPAD)
    *@param: N/A
    *@autor: Desconhecido
    *@autor: Última Modificação: Jean Michel - 02/08/2013
*/
function inicializa() {
		
	var opcao = (document.getElementById('v_opcao1').checked ) ? "R" : "C";
    var numCartao = document.getElementById('v_cartao').value;
    var strSenha = document.getElementById('v_senhaCartao').value;
    var vConta = document.getElementById('v_conta').value;
    var dblSaldoAtual = document.getElementById('v_saldo_conta').value;
    
    var strContaFinal = "";
    var strEspacoConta = "";
    var intQtdCaractConta = 0;
    var strSaldoFinal = "";
    var strEspacoSaldo = "";
    var intQtdCaractSaldo = 0;
    var intLimpaSenha = 0;

	bematech.PinpadLimpaTela(0);
    document.getElementById('v_opcao1').focus;
    
	modelaOpcao(opcao,false);
	
    if(numCartao != "" && numCartao != null){
        numCartao = "S";
    }else{
        numCartao = "N";
    }

    //Verifica se opção é cartão e se já foi passado na leitora
    if(opcao == "C" && numCartao == "S" && vConta != "" && strSenha == ""){
        document.getElementById('divCartao').display = 'block';
        intSaldoAtual = replaceAll(dblSaldoAtual, ".", "");
        intSaldoAtual = parseInt(intSaldoAtual);
        
		// Tenta conectar com PinPad novo
		cnxPinpad = conexaoPinpadNovo(cnxPinpad);
		
        if(intSaldoAtual > 9999999){
            
            bematech.PinpadPosicionaEscreveDisplay(1,1,"Saldo Disponivel",0);
						            
            strSaldoFinal = dblSaldoAtual;
            intQtdCaractSaldo = strSaldoFinal.length;
    
            //Alinhamento de texto Direita -> Esquerda Pinpad

            while(intQtdCaractSaldo < 16){
               strSaldoFinal = "";                       
               strEspacoSaldo = strEspacoSaldo + " ";
               strSaldoFinal = strEspacoSaldo + dblSaldoAtual;
               intQtdCaractSaldo = strSaldoFinal.length;
            }
    
			bematech.PinpadPosicionaEscreveDisplay(2,1,strSaldoFinal,300);
        }else{
            
            strContaFinal = "Cta:" + strEspacoConta + vConta;
            intQtdCaractConta = strContaFinal.length;
            
            //Alinhamento de texto Direita -> Esquerda Pinpad

            while(intQtdCaractConta < 16){
               strContaFinal = "";                       
               strEspacoConta = strEspacoConta + " ";
               strContaFinal = "Cta:" + strEspacoConta + vConta;
               intQtdCaractConta = strContaFinal.length; 
            }
            
			// Verifica se é utilizado PinPad Novo
			if (cnxPinpad == false) {
			bematech.PinpadPosicionaEscreveDisplay(1,1,strContaFinal,200);
			}
			
            strSaldoFinal = "Sld:" + strEspacoSaldo + dblSaldoAtual;
            intQtdCaractSaldo = strSaldoFinal.length;
    
            //Alinhamento de texto Direita -> Esquerda Pinpad

            while(intQtdCaractSaldo < 16){
               strSaldoFinal = "";                       
               strEspacoSaldo = strEspacoSaldo + " ";
               strSaldoFinal = "Sld:" + strEspacoSaldo + dblSaldoAtual;
               intQtdCaractSaldo = strSaldoFinal.length; 
            }
   
			// Verifica se é utilizado PinPad Novo
			if (cnxPinpad == false) {
			bematech.PinpadPosicionaEscreveDisplay(2,1,strSaldoFinal,600);
        } 
						
			if (cnxPinpad != false) {
				escreveDadosCoopPinPadNovo(cnxPinpad, strContaFinal, strSaldoFinal );
			}
			
        } 		
    }
}

/**
    *@desc:  Função p/ seleção de opção
    *@param: N/A
    *@autor: Desconhecido
    *@autor: Última Modificação: Jean Michel - 02/08/2013
*/
function selectOpcao (opcao) {

	if (opcao == "C"){
	
		cnxPinpad = conexaoPinpadNovo(cnxPinpad);
		if (cnxPinpad != false && typeof cnxPinpad != 'undefined') {
			document.getElementById('v_cartao').focus();
		}
	}
	if (opcao == "R"){
		cnxPinpad = fechaConexaoPinpadNovo(cnxPinpad);
	}
	
    //Este trecho de codigo deve ser mantido para que não gere erro de senha incorreta de forma errada
    document.action.ok.value='';    
	bematech.PinpadLimpaTela(0); 
	modelaOpcao(opcao,true);
						
}
/*************** ROTINAS PINPAD NOVO ********************************/

function lerCartaoPinpadNovo(oPinpad) {

	var contador = 0;
	
	// Se nao houver conexao ativa, conecta */	
	oPinpad = conexaoPinpadNovo(oPinpad);
	
	if (oPinpad == false) {return;}
	
	document.getElementById('divAguardePassagem').style.display = "block";	
	
	if (document.getElementById('v_cartao').value != "") {
		document.getElementById('v_cartao').value = ""
	}
	
	setTimeout(function(){
	
		while (document.getElementById('v_cartao').value == "") {
									
			if  (contador > 2) { break; }
			
			solicitaPassagemPinpadNovo(oPinpad, document.getElementById('v_cartao'));
			contador = contador + 1;	
		}
		
		oPinpad = fechaConexaoPinpadNovo(oPinpad);
		
		if  (document.getElementById('v_cartao').value != "") {
			document.getElementById('divAguardePassagem').style.display = "none";
			validaCartao();
		}
		
	},500);
}

function escreveDadosCoopPinPadNovo(oPinpad, locConta, locSaldo) {
	oPinpad.LCD_Clear();
	oPinpad.LCD_DisplayString(1,10,1,locConta);
	oPinpad.LCD_DisplayString(1,32,1,locSaldo);		
}

function solicitaSenhaPinpadNovo(oPinpad) {

	// Se nao houver conexao ativa, conecta */
	oPinpad = conexaoPinpadNovo(oPinpad);
	if (oPinpad == false) {return;}

	document.getElementById('divAguardeSenha').style.display = "block";
	
	obtemSenhaCypto(oPinpad, document.getElementById('v_nrdocard'), document.getElementById('v_senhaCartao'), document.getElementById('divAguardeSenha'));	
}

/*************** FIM ROTINAS PINPAD NOVO ********************************/


/**
    *@desc:  Função p/ modelar opção
    *@param: N/A
    *@autor: Desconhecido
    *@autor: Última Modificação: Jean Michel - 02/08/2013
*/
function modelaOpcao (opcao,limpa) {
	var exibe = (opcao == "R" ) ? "none" : "block";
	var coordenador = (limpa) ? "none" : (document.getElementById('v_habilita').value == "no") ? "none" : "block";
    var v_coordenador = (limpa) ? "no" : (document.getElementById('v_habilita').value == "no") ? "no" : "yes";
    var desabilita;
	
	document.getElementById('divCartao').style.display = exibe;
	document.getElementById('divSenhaCartao').style.display = exibe;
	
	// O codigo do operador e senha so quando precisar a senha do Coordenador
	document.getElementById('divCoordenador').style.display = coordenador;
    document.action.v_coordenador.value = v_coordenador;
	
	bematech.PinpadLimpaTela(0);

    if (coordenador == 'none'){
        document.getElementById('v_senhaCartao').value = "";   
    }
    
    // Limpar campos 
	for(var i=0;i<document.action.elements.length;i++) {
		if (document.action.elements[i].type == "text" || 
			document.action.elements[i].type == "password") {		
			if (!document.action.elements[i].readOnly) {
				if  (limpa) {
					document.action.elements[i].value="";
				}
			}		
		}
	}
		
	desabilita = (document.action.v_conta.value == "");
	
	// Numero da conta sempre desabilitado para opcao 'C'	
	document.action.v_conta.disabled = (opcao == 'C') ? true : false;
	
	// Se opcao 'C' e Cartao nao validado ainda entao desabilita senao habilita
	document.action.v_valor.disabled = (opcao == 'C') ? desabilita : false;
	document.action.v_senhaCartao.disabled = (opcao == 'C') ? desabilita : false;
		
	// Se nome ja foi prenchido e nao informado valor, foco no valor	
	if  (document.action.v_nome.value != "" ) {
		 if (document.action.v_valor.value.replace(",",".").replace(".","") <= 0) {
             document.action.v_valor.focus();
         }
	}	
	else	
	if  (opcao == "R") {  // Recibo
		document.action.v_conta.focus();    
    }else { 				  // Cartao	
		document.action.v_cartao.focus();
	}
	
}

/**
    *@desc:  Função p/ validação de cartão
    *@param: N/A
    *@autor: Desconhecido
    *@autor: Última Modificação: Jean Michel - 02/08/2013
*/
function validaCartao () {
    //Este trecho de codigo deve ser mantido para que não gere erro de senha incorreta de forma errada
    document.action.ok.value='';
	document.action.v_action.value = "LeaveCartao";
    document.action.submit();
	
}

/**
    *@desc:  Função p/ alteração de conta
    *@param: N/A
    *@autor: Desconhecido
    *@autor: Última Modificação: Jean Michel - 02/08/2013
*/
function changeConta (){

   document.action.v_action.value = "LeaveConta";
   document.action.submit();
   
   for(var i=0;i<document.action.length;i++) {
      document.action.elements[i].disabled=true;
   }
   
}

/**
    *@desc:  Função p/ enviar formulário
    *@param: N/A
    *@autor: Desconhecido
    *@autor: Última Modificação: Jean Michel - 02/08/2013
*/
function submitFormulario() {
   var strSenha = document.getElementById('v_senhaCartao').value;
   var opcao = (document.getElementById('v_opcao1').checked ) ? "R" : "C";
   if (opcao == "C") {
       if (strSenha != "" && strSenha != " ") {
           document.action.v_action.value='Ok';
           document.action.ok.value='Ok';
		   
		    if (EncPinpad != "" &&
				WrkPinpad != "") {
		   document.getElementById('v_infocry').value = EncPinpad;		   
		   document.getElementById('v_chvcry').value = WrkPinpad;
			}
		   
           document.action.submit();
		   
           for(var i=0;i<document.forms[0].length;i++){
              document.forms[0].elements[i].disabled=true;
           }
       }else{
           document.getElementById('v_senhaCartao').focus();
       }
   }else{
       document.action.ok.value='Ok';
       document.action.submit();
       for(var i=0;i<document.forms[0].length;i++){
          document.forms[0].elements[i].disabled=true;
       }
   }
   
}

/**
    *@desc:  Função p/ cancelar formulário, funciona como uma reset
    *@param: N/A
    *@autor: Desconhecido
    *@autor: Última Modificação: Jean Michel - 02/08/2013
*/
function cancelFormulario() {
	cnxPinpad = fechaConexaoPinpadNovo(cnxPinpad);
   document.action.v_cartao.value = "";
   document.action.v_action.value='Cancelar';
   document.action.cancela.value='Cancelar';
   document.getElementById('v_habilita').value = "no";
   document.getElementById('v_coordenador').value = "no";
	
	document.getElementById('v_opcao1').checked = true;
	selectOpcao('R');
	
   document.getElementById("frmSaque").submit();
   
   
   for(var i=0;i<document.forms[0].length;i++){
      document.forms[0].elements[i].disabled=true;
   }
}
                                                 
/**
    *@desc:  Função p/ submit de informações após usuário informar a senha
    *@param: strInput - Input da Ação (Usa-se this na passagem do parâmetro)
    *@param: strEvent - Evento ocorrido (Usa-se e na passagem do parâmetro)  
    *@autor: Jean Michel - 05/06/2013
    *@autor: Última Modificação: 
*/
function enviaFormularioPinPad(strInput, strEvent) { 
    var strSenha = document.getElementById('v_senhaCartao').value;
    
    if (window.event.keyCode == 13 && strSenha != "" && strSenha != " ") { 
		fechaConexaoPinpadNovo(cnxPinpad);
        submitFormulario(); 
    }
	
}

/**
    *@desc:  Função p/ verificar qual tecla foi pressionado e se deve ou não da refresh no form
    *@param: event - Evento
    *@autor: Jean Michel - 06/06/2013
    *@autor: Última Modificação: 
*/
function verificaBackspace(event){
	if (document.activeElement.name != 'v_valor' && document.activeElement.name != 'v_senhaCartao' && event.keyCode == 8){
		cancelFormulario();
	}
}

/**
    *@desc:  Função p/ verificar se a numeracao do cartao existe quando colocado o focus no btn Ok e Cancelar
    *@param: N/A
    *@autor: Jean Michel - 19/07/2013
    *@autor: Última Modificação: 
*/
function verificaCartao(){
    
    var numCartao = document.getElementById('v_cartao').value;
    var valValor = document.getElementById('v_valor').value;

    if (numCartao == "" || numCartao == " " || numCartao == null) {
        document.getElementById('v_cartao').focus();
    }else if(numCartao != "" && (valValor != "" || valValor != null)){
        document.getElementById('v_senhaCartao').focus();
    }
}


// Evento onKeyDown no campo "nrdconta"
$("#v_conta").bind("keydown", function (e) {
    //Verificar tecla ENTER para realizar acao
    var code = (e.keyCode ? e.keyCode : e.which);
    if (code == 13) {
        changeConta();
        e.preventDefault();
}

    // Seta máscara ao campo
    return $("#v_conta").setMaskOnKeyDown("INTEGER", "zzzz.zzz.z", ".", e);
});

$(document).ready(function () {

    // Evento onKeyDown no campo "nrdconta"
    $("#v_conta").unbind("keydown").bind("keydown", function (e) {
        //Verificar tecla ENTER para realizar acao
        var code = (e.keyCode ? e.keyCode : e.which);
        if (code == 13 || code == 9) {
            changeConta();
            e.preventDefault();
        }

        // Seta máscara ao campo
        return $("#v_conta").setMaskOnKeyDown("INTEGER", "zzzz.zzz.z", ".", e);
    });

});


</script>
<title>LANÇAMENTO INCLUSÃO - BOLETIM CAIXA</title></head>

<body background="/images/moeda.jpg" bgproperties="fixed" class="fundo" onLoad="JavaScript: mudaFoco(); inicializa();" onKeyUp="verificaBackspace(event); callBlass(event); callBLini(event); callBLsal(event);" oncontextmenu="    return false;" onunload="    bematech.PinpadLimpaTela(0);"> 

<div>
	<form name="action" onKeyDown="change_page(event)" method=post name="frmSaque" id="frmSaque" >
		<input type="hidden" name="vh_foco" >
		<input type="hidden" name="v_msg">
				
                <input type="hidden" name="v_infocry">
                <input type="hidden" name="v_chvcry">
                <input type="hidden" name="v_nrdocard">
				
		<input type="hidden" name="v_saldo_conta">
        <input type="hidden" name="v_action">
		<input type="hidden" name="v_habilita" id="v_habilita">
		<input type="hidden" name="v_coordenador" id="v_coordenador">

		<p style="word-spacing: 0; line-height: 100%; margin-top: 0; margin-bottom: 0">&nbsp;</p>
		
		<div align="center">
			<center>
				<table width="100%" class=cabtab>
					<tr>
						<td width="15%" align="center"> <input type="text" name="v_coop" size="11" class="transp" readOnly></td>
						<td width="20%" align="center"> PA&nbsp; <input type="text" name="v_pac" size="1" class="transp"  readOnly></td>
						<td width="20%" align="center"> CAIXA&nbsp; <input type="text" name="v_caixa" size="1" class="transp" readOnly></td>
						<td width="30%" align="center"> OPERADOR&nbsp; <input type="text" name="v_operador" size="7" class="transp" readOnly></td>
						<td width="15%" align="center"> <input type="text" name="v_data" size="10" class="transp" readOnly></td>
					</tr>
				</table>
			</center>
		</div>
		
		<div align="center">
			<center>
				<table width="100%" class=cabtab>
					<tr>
						<td class=titulo>INCLUSÃO - CHEQUE AVULSO</td>
						<td width="21%" class=programa align="right">P.054&nbsp; V.2.01</td>
					</tr>
				</table>
			</center>
		</div>
		
		<div align="center" id="campos" name="campos" >
			<center>
				<table cellspacing = 0 cellpadding= 0 width=100%>
					<tr>
						<td width="100%" valign="middle" align="center">
						<div align="center">
							<center>
								<table cellspacing = 0 cellpadding = 1 class=tcampo width="100%">
									<tr>
										<td align="right" class="linhaform">&nbsp;</td>
										<td ></td>
									</tr>	
									<tr>  
										<td align="right" class="linhaform" style="width:14%">&nbsp;</td>
										<td>
											<table cellspacing="0" cellpadding="0" width="100%">
												<tr>
													<td class="linhaform" style="width: 30%;">
														<input type="radio" name="v_opcao" id="v_opcao1" value="R"    onClick="JavaScript:selectOpcao('R');" checked> Recibo
													</td>  
													<td class="linhaform" style="width: 70%;">	
														<input type="radio" name="v_opcao" id="v_opcao2" value="C"    onClick="JavaScript:selectOpcao('C');" > Cartão
													</td>                                      
												</tr>
											</table>
										</td>               
									</tr>
									<tr>
										<td align="right" class="linhaform">&nbsp;</td>
										<td ></td>
									</tr>
		
								</table>
	
	<div id="divCartao" style="display: none;">
		 <table cellspacing = 0 cellpadding = 1 class=tcampo width="100%">			
			<tr>
				<td align="right" class="linhaform" style="width:14%">Cartão:</td>
				<td> 
									<input type="password" name="v_cartao" id="v_cartao" size="50" class="input" maxlength="36" onFocus="if(this.value.length <= 0) { lerCartaoPinpadNovo(''); } else { v_valor.focus(); }"    onBlur="if(this.value.length <= 0) { v_opcao2.focus(); }" onKeyDown="JavaScript:validaInteiro(event); " onkeyup="if (this.value.length == 36){validaCartao();}" onChange="JavaScript:validaCartao();" onClick="lerCartaoPinpadNovo('');"  style="text-align: right">
				</td>
			</tr>				  
		 </table> 
	</div>		
		
	 <table cellspacing = 0 cellpadding = 1 class=tcampo width="100%">	
        <tr>
          <td align="right" class="linhaform" style="width:14%">Conta/DV:</td>
          <td>
            <input type="text" id="v_conta" name="v_conta" size="10" class="input" maxlength="10" onChange="JavaScript:changeConta();" style="text-align: right">
            <input type="text" id="v_nome" name="v_nome" size="40" class=input disabled style="font-weight: bold">
          </td>
        </tr>
        <tr>
          <td align="right" class="linhaform" style="width:14%">Valor:</td>
          <td>
            <input type="text" id="v_valor" name="v_valor" size="20" maxlength="18" class="input" onKeyUp="callCalc(event, this)" onKeyDown="JavaScript:FormataValor(this,14,event)" onChange="JavaScript: formataDecimal(this,true,event); confirmaSaque();" style="text-align: right">
          </td> 
        </tr>
        <tr>
          <td align="right" class="linhaform" style="width:14%"></td>
          <td ><input type="text" id="v_mensagem" name="v_mensagem" size="70" class="input" onKeyDown="JavaScript:validaInteiro(event)" maxlength="14" disabled></td>
        </tr>
        <tr>
          <td align="right" class="linhaform" style="width:14%"></td>
          <td ><input type="text" id="v_msgtrf" name="v_msgtrf" size="70" class="input" disabled></td>
        </tr>
	</table>	
		
	<div id="divSenhaCartao" style="display: block;" >
		<table cellspacing = 0 cellpadding = 1 class=tcampo width="100%">			
			<tr>
			  <td class="linhaform" align="right" style="width:14%">Senha Cartão:</td>
             		<td> <input type="password" name="v_senhaCartao" id="v_senhaCartao" size="10" class="input" maxlength="6" onmousedown="return false;" onClick="if (document.getElementById('divConfirmaSaque').style.display == 'none') {solicitaSenhaPinpadNovo('');}" onblur="fechaConexaoPinpadNovo(cnxPinpad);" onKeyDown="JavaScript:validaInteiro(event);" onkeyup="JavaScript:enviaFormularioPinPad(this, event);"        style="text-align: right">  </td>
			</tr>
		</table>	
	</div>	
		
	<div id="divCoordenador" style="display:none;">	
		<table cellspacing = 0 cellpadding = 1 class=tcampo width="100%">	
			<tr>
			  <td class="linhaform "align="right" style="width:14%">Código:</td>
                          <td ><input class=input type="text" id="v_cod" name="v_cod" size="12" maxlength="10"></td>
			</tr>
			
			<tr>
			  <td class="linhaform" align="right" style="width:14%">Senha:</td>
                          <td ><input class=input type="password" id="v_senha" name="v_senha" size="12" maxlength="30" ></td>
			</tr>
			<tr>
			  <td align="right" class="linhaform"></td>
			  <td>&nbsp;</td>
			</tr>
		</table>
	</div>

	<table cellspacing = 0 cellpadding = 1 class=tcampo width="100%">	
        <tr>
          <td align="center" class="linhaform" colspan="2">
            <input type="button" id="sok" name="sok" value="Ok" class="button" onClick="JavaScript:submitFormulario();" onFocus="JavaScript:verificaCartao();" >
            <input type="button" id="sCancela" name="sCancela" value="Cancelar" class="button" onClick="JavaScript:cancelFormulario();" >
            <input type="hidden" id="ok" name="ok" value="">
            <input type="hidden" id="cancela" name="cancela" value="">
          </td>
        </tr>
        <tr>
          <td align="right" class="linhaform"></td>
          <td>&nbsp;</td>
        </tr>
    </table>
	  
      </center>
      </div>
      </td>
      </tr>
</table>      
  </center>
</div>
 <div align="center">
  <table width="100%">
        <tr>
           <td align="right" class="linhaform">
           <input type="button" value="Estorno" name="estorno" class="button" onClick="JavaScript:redir_login('crap074.w')">
           </td>
        </tr>
  </table>      
</div>
</form>
</div>
<div id="divConfirmaSaque" name="divConfirmaSaque" style="display:none; width:100%; height:100px; margin-top:-95px; margin-right:55px; text-align:center;" align="center" >
	<form>
        <table class="tableForm" style="text-align:center; background-color:rgb(255, 255, 206); width: 250px;">
    		<tr>
    			<td colspan="2">
    				<font style="font-family: Arial, Verdana, sans-serif; font-size:11pt;">Cooperado Confirma Saque?</font>
    			</td>
    		<tr>
    		<tr>
    			<td>
    				<input type="button" name="btnConfirmaSaque" id="btnConfirmaSaque" value="Confirma" class="button" onClick="JavaScript:coopConfSaque();">
    			</td>
    			<td>
    				<input type="button" name="btnCancelaSaque" id="btnCancelaSaque" value="Cancela" class="button" onClick="JavaScript:cancelFormulario();">
    			</td>
    		<tr>
    	</table>	
    </form>
</div>
<div id="divAguardePassagem" name="divAguardePassagem" style="display:none; width:100%; height:100px; margin-top:-90px; margin-right:55px; text-align:center;" align="center" >
        <form>
        <table class="tableForm" style="text-align:center; background-color:rgb(255, 255, 206); width: 250px;">
                    <tr>
                            <td colspan="2" id = "msgAguardePassagem">
                                    <font style="font-family: Arial, Verdana, sans-serif; font-size:11pt;">Aguarde a passagem do cartão</font>
                            </td>
                    </tr>
            </table>        
    </form>
</div>
<div id="divAguardeSenha" name="divAguardeSenha" style="display:none; width:100%; height:100px; margin-top:-90px; margin-right:55px; text-align:center;" align="center" >
        <form>
        <table class="tableForm" style="text-align:center; background-color:rgb(255, 255, 206); width: 250px;">
                    <tr>
                            <td colspan="2" id = "msgAguardeSenha">
                                    <font style="font-family: Arial, Verdana, sans-serif; font-size:11pt;">Aguarde a digitação da senha</font>
                            </td>
                    </tr>
            </table>        
    </form>
</div>
</body>
</html>