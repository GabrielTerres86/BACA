PL/SQL Developer Test script 3.0
69
declare 
   CURSOR cr_crapvri IS 
     SELECT r.cdcooper, r.nrdconta, r.nrctremp, r.vlempres, r.progress_recid
       FROM crapvri r 
      WHERE r.dtrefere = to_date('30/06/2021', 'DD/MM/YYYY')
         AND r.progress_recid in (5907014052, 5907014079, 5905495025, 5905495047, 5906551362, 5905504147, 5905022626, 5905401436, 5905401446, 5905401456
                                , 5905036710, 5907802080, 5907802089, 5904960672, 5906898827, 5906450052, 5906450061, 5906450070, 5906450079, 5907038114
                                , 5907038134, 5907038149, 5907038165, 5907038176, 5905536447, 5906354259, 5908107013, 5908107041, 5906800261, 5905665860
                                , 5905665888, 5905665939, 5905665982, 5905666028, 5905666066, 5906194282, 5907530378, 5905679902, 5905546088, 5905546121
                                , 5908113536, 5905533315, 5905714531, 5905714696, 5908076282, 5907082655, 5907082673, 5907082691, 5907082710, 5907526066
                                , 5905760934, 5905760951, 5905760987, 5904967521, 5907241274, 5907241300, 5907241313, 5905473352, 5905473370, 5905473407
                                , 5906373229, 5906373239, 5906373249, 5906373259, 5907583268, 5906277749, 5908339706, 5907265138, 5905706665, 5907710300
                                , 5907710309, 5907710318, 5907710327, 5907710336, 5905672727, 5905084179, 5905331793, 5906579165, 5906579175, 5907599712
                                , 5907599758, 5905541081, 5905723841, 5907154692, 5907154703, 5907154714, 5907154724, 5907154816, 5907154738, 5907154758
                                , 5907154770, 5906207680, 5906207689, 5906207698, 5904973041, 5904973051, 5908173317, 5905107927, 5905107899, 5905107909
                                , 5907096983, 5908175115, 5908173514, 5908173539, 5908179782, 5908179818, 5908179853, 5908179873, 5905301846, 5907268067
                                , 5907565835, 5908372760, 5908291211, 5904976130, 5906300637, 5905326824, 5908822023, 5905892171, 5905892260, 5905892198
                                , 5905892229, 5906072647, 5906072737, 5906072795, 5906072888, 5906072938, 5905898327, 5906885398, 5908899693, 5905710725
                                , 5905933585, 5909367284, 5909367294, 5909367304, 5909367355, 5909367365, 5909367314, 5908207557, 5907462244, 5907333255
                                , 5908388959, 5907312199, 5909213430, 5905987563, 5906799285, 5907737988, 5907737997, 5907738006, 5907470755, 5908320608
                                , 5906154608, 5906154626, 5906154660, 5908322394, 5908322406, 5905010857, 5908867207, 5906018764, 5906018788, 5908574267
                                , 5906811081, 5907481055, 5909285905, 5907632770, 5907381885, 5907146687, 5907166534, 5908082997, 5907494930, 5909169035
                                , 5907471401, 5906103192, 5906103059, 5906103104, 5906103154, 5906103237, 5905372990, 5906261979, 5909283209, 5908514090
                                , 5909285015, 5908514100, 5904122315, 5903769913, 5909523265);

begin

   FOR rw_cravri IN cr_crapvri LOOP
     BEGIN
       UPDATE crapvri r 
          SET r.vldivida = rw_cravri.vlempres
        WHERE r.cdcooper = rw_cravri.cdcooper
          AND r.nrdconta = rw_cravri.nrdconta
          AND r.nrctremp = rw_cravri.nrctremp
          AND r.progress_recid = rw_cravri.progress_recid;
     END;
   END LOOP;


  UPDATE crapvri r 
    SET r.vldivida = 83703.57
       ,r.vlempres = 83703.57
  WHERE r.cdcooper = 3
    AND r.nrdconta = 94
    AND r.nrctremp = 211409
    AND r.progress_recid = 5909523265;

  UPDATE crapvri r 
    SET r.vldivida = 458.11
       ,r.vlempres = 458.11
  WHERE r.cdcooper = 6
    AND r.nrdconta = 223034
    AND r.nrctremp = 245464
    AND r.progress_recid = 5903769913;
           
  -- Atualizacao de contratos de cessao de cartao que estao com o valor da divida incorreto.
  UPDATE crapris r 
    SET r.vldivida = 0.01
  WHERE r.cdcooper = 1
    AND r.nrdconta = 8660948
    AND r.nrctremp = 2599881
    AND r.progress_recid = 1832390315;
   
  COMMIT;
   
exception
  when others then
    ROLLBACK;  
end;
0
0
